var webSocket;!function(a,b,c){"use strict";var d=function(){void 0===webSocket&&(this.$footer=c("#footer"),this.users=parseInt(this.$footer.attr("data-users"),10),this.init(),this.bindEvents())};d.prototype.init=function(){this.socket=io.connect("http://"+b.domain+":"+location.port+"/socket",{"connect timeout":1e3})},d.prototype.bindEvents=function(){var a=this;this.socket.on("connect",function(){a.socket.emit("joined",{}),console.log("open socket")}),this.socket.on("status",function(b){console.log("status: "+b.msg),c(".overlay").hide(),0===a.users&&shareModalStart()}),this.socket.on("rw",function(a){editor.aceEditor.getValue();"object"==typeof a&&editor.id!=a.id&&(editor.canSend=!1,editor.setValue(a.text),editor.canSend=!0)}),this.socket.on("user_in",function(b){a.users++,a.$footer.find(".watchers-count").text(a.users+" watcher(s)")}),this.socket.on("user_out",function(b){a.users--,a.$footer.find(".watchers-count").text(a.users+" watcher(s)")}),this.socket.on("begin_run",function(){console.log("begin run"),room.$runElements.toggleClass("active"),editor.aceEditor.setReadOnly(!0)}),this.socket.on("end_run",function(a){console.log("Output: "+a),room.writeOutput(a)}),this.socket.on("language",function(a){console.log("Language: "+a),editor.canSendLanguage=!1,editor.setLanguageHighlight(a),editor.$comboLanguages.val(a),setTimeout(function(){editor.canSendLanguage=!0},500)})},a.WebSocket=d}(window,document,$),webSocket=new WebSocket;